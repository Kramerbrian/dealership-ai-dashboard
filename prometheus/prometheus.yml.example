# Prometheus configuration example for GNN Analytics
# Copy to your Prometheus config directory

global:
  scrape_interval: 15s
  evaluation_interval: 30s
  external_labels:
    cluster: 'dealershipai-production'
    environment: 'production'

# Scrape GNN engine metrics
scrape_configs:
  - job_name: 'gnn-engine'
    static_configs:
      - targets: ['gnn-engine:8000']  # Adjust to your GNN service endpoint
        labels:
          service: 'gnn'
          component: 'ml-engine'
    metrics_path: '/metrics'
    scrape_interval: 15s

  # Scrape Next.js app metrics (if exposing GNN metrics via API)
  - job_name: 'dealershipai-api'
    static_configs:
      - targets: ['api.dealershipai.com:9090']
        labels:
          service: 'api'
          component: 'orchestrator'
    metrics_path: '/api/metrics'
    scrape_interval: 30s

# Load recording and alert rules
rule_files:
  - 'prometheus/recording-rules.yml'
  - 'prometheus/alert-rules.yml'

# Alertmanager configuration (optional)
alerting:
  alertmanagers:
    - static_configs:
        - targets:
          - 'alertmanager:9093'

# Storage configuration
storage:
  tsdb:
    retention.time: 30d
    retention.size: 50GB
    path: /prometheus/data

# Remote write (optional - for long-term storage)
# remote_write:
#   - url: 'https://your-remote-storage.com/api/v1/write'
#     queue_config:
#       max_samples_per_send: 1000
#       batch_send_deadline: 5s

