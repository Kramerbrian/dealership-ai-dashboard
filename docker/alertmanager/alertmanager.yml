# Simplified Alertmanager config for docker/alertmanager/ path
# This is a minimal version - use prometheus/alertmanager.yml for full setup

global:
  resolve_timeout: 5m
  slack_api_url: ${SLACK_WEBHOOK_URL}  # Set via environment variable

route:
  receiver: "slack_ai_ops"
  group_by: ["alertname"]
  group_wait: 15s
  group_interval: 2m
  repeat_interval: 2h

receivers:
  - name: "slack_ai_ops"
    slack_configs:
      - channel: "#ai-ops"
        username: "DealershipAI_AlertBot"
        icon_emoji: ":robot_face:"
        send_resolved: true
        title: "{{ .CommonAnnotations.summary }}"
        text: |
          *Status:* {{ .Status }}
          *Alert:*  {{ .CommonLabels.alertname }}
          *Dealer:* {{ .CommonLabels.dealer | default "N/A" }}
          *Severity:* {{ .CommonLabels.severity }}
          *Details:* {{ range .Alerts }}
          - *Expr:* {{ .Annotations.description | default .Annotations.summary }}
          - *Starts:* {{ .StartsAt }}
          {{ end }}

