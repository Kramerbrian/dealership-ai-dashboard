global:
  resolve_timeout: 5m
  slack_api_url: ${SLACK_WEBHOOK_URL}  # Replace with your Slack webhook URL

route:
  group_by: ["alertname", "dealer"]
  group_wait: 15s
  group_interval: 2m
  repeat_interval: 2h
  receiver: "slack_ai_ops"
  routes:
    # Critical / executive alerts
    - match:
        severity: "critical"
      receiver: "slack_exec_board"
      continue: false
    # Default warning/info alerts
    - match_re:
        severity: "^(warning|info)$"
      receiver: "slack_ai_ops"
      continue: false

receivers:
  # Operations channel
  - name: "slack_ai_ops"
    slack_configs:
      - channel: "#ai-ops"
        username: "DealershipAI_AlertBot"
        icon_emoji: ":warning:"
        send_resolved: true
        title: "{{ .CommonAnnotations.summary }}"
        text: |
          *Status:* {{ .Status }}
          *Alert:* {{ .CommonLabels.alertname }}
          *Severity:* {{ .CommonLabels.severity }}
          *Dealer:* {{ .CommonLabels.dealer | default "N/A" }}
          *When:* {{ .StartsAt }}
          {{ range .Alerts }}• {{ .Annotations.description | default .Annotations.summary }}{{ end }}

  # Executive / critical alerts
  - name: "slack_exec_board"
    slack_configs:
      - channel: "#exec-board"
        username: "DealershipAI_ExecBot"
        icon_emoji: ":fire:"
        send_resolved: true
        title: ":fire: {{ .CommonAnnotations.summary }}"
        text: |
          *Critical Alert:* {{ .CommonLabels.alertname }}
          *Dealer:* {{ .CommonLabels.dealer | default "Portfolio" }}
          *Severity:* {{ .CommonLabels.severity }}
          *Triggered:* {{ .StartsAt }}
          *Details:*
          {{ range .Alerts }}- {{ .Annotations.description | default .Annotations.summary }}{{ end }}
          *Next Steps:* Investigate ROI impact in Grafana → Dashboard › GNN Analytics

