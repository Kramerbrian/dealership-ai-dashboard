export async function refreshGoogleToken(refreshToken:string){const res=await fetch('https://oauth2.googleapis.com/token',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({client_id:process.env.GOOGLE_OAUTH_CLIENT_ID!,client_secret:process.env.GOOGLE_OAUTH_CLIENT_SECRET!,refresh_token:refreshToken,grant_type:'refresh_token'})});if(!res.ok)throw new Error(`Refresh failed: ${res.status}`);return res.json()as Promise<{access_token:string;expires_in:number;token_type:string;scope?:string}>}export function isExpired(expiresAtISO?:string|null,skewSec=60){if(!expiresAtISO)return true;return Date.now()+skewSec*1000>new Date(expiresAtISO).getTime()}