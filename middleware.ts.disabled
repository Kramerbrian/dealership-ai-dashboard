import { authMiddleware } from '@clerk/nextjs';

export default authMiddleware({
  publicRoutes: [
    "/",
    "/api/health",
    "/api/auth/status",
    "/pricing.html",
    "/admin",
    "/test-audit",
    "/api/trpc/(.*)"  // Make tRPC public for testing admin features
  ],
  ignoredRoutes: ["/_next", "/favicon.ico"],
});

export const config = {
  matcher: ["/((?!.+\\.[\\w]+$|_next).*)", "/", "/(api|trpc)(.*)"],
};
